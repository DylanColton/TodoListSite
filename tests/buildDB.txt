CREATE TABLE users (
	id SERIAL PRIMARY KEY,
	username VARCHAR(100) NOT NULL,
	email VARCHAR(255) UNIQUE NOT NULL,
	password TEXT NOT NULL
);

CREATE TABLE todos (
	id SERIAL PRIMARY KEY,
	userid INT NOT NULL,
	task VARCHAR(250) NOT NULL,
	completed BOOLEAN NOT NULL DEFAULT FALSE,
	FOREIGN KEY (userid) REFERENCES users(id) ON DELETE CASCADE
);

CREATE TABLE subusers (
	id SERIAL PRIMARY KEY,
	owner_id INT NOT NULL,
	subuser_id INT NOT NULL,
	can_edit BOOLEAN NOT NULL DEFAULT FALSE,
	FOREIGN KEY (owner_id) REFERENCES users(id) ON DELETE CASCADE,
	FOREIGN KEY (subuser_id) REFERENCES users(id) ON DELETE CASCADE,
	UNIQUE (owner_id, subuser_id)
);
